# steps:
#   - name: 'gcr.io/cloud-builders/gcloud'
#     entrypoint: 'bash'
#     args:
#     - '-eEuo'
#     - 'pipefail'
#     - '-c'
#     - |-
#       pwd
#       # export VERSIONS_COUNT=$(gcloud app versions list --sort-by=createTime --format=json | jq ' . | length');
#       # echo $VERSIONS_COUNT;
#       # if [[ $VERSIONS_COUNT == 210 ]]
#       # then
#       #         echo "deleting the last verion which its count is 210...."
#       #         gcloud app versions delete $(gcloud app versions list --sort-by=createTime --limit 1 --format='value(VERSION.ID)') --quiet
#       # fi

# # steps:
# #   - name: 'ubuntu'
# # #     args: ['ls', '-a']
# # substitutions:
# #   VERSIONS_COUNT: "1"
# options:
#   dynamic_substitutions: true

# steps:
#   - name: 'gcr.io/cloud-builders/gcloud'
#     args:
#     - 'run'
#     - 'deploy'
#     - 'cloudrunservice'
#     - '--image'
#     - 'us-docker.pkg.dev/cloudrun/container/hello'
#     - '--region'
#     - 'us-central1'
#     - '--platform'
#     - 'managed'
#     - '--allow-unauthenticated'

steps:
  - name: 'gcr.io/cloud-builders/gcloud'
    entrypoint: 'bash'
    args: ['sh','./appengine/demo.sh']